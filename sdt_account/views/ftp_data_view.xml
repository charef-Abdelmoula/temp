<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_ftp_data_form" model="ir.ui.view">
        <field name="name">ftp.data.form</field>
        <field name="model">ftp.data</field>
        <field name="arch" type="xml">
            <form string="FTP Data">
                <header>
                    <button name="action_assign_config" type="object" states="todo,blocked" string="Validate" class="oe_highlight"/>
                    <button name="action_cancel" type="object" states="todo,blocked" string="Cancel"/>
                    <button name="action_todo" type="object" states="blocked,cancel" string="Set to TODO" class="oe_highlight"/>
                    <button name="generate_inv_bills" type="object" string="Generate INV/Bills" class="oe_highlight"
                            attrs="{'invisible': ['|',('state','!=','todo'),('import_config_id','=',False)]}"/>
                    <field name='state' widget='statusbar'/>
                </header>
                <sheet>
                    <group>
                        <group string='General Information'>
                            <field name="country"/>
                            <field name="book"/>
                            <field name="document_type"/>
                            <field name="document_number"/>
                            <field name="purchase_order_no"/>
                            <field name="sales_order_no"/>
                            <field name="document_date"/>
                            <field name="expiry_date"/>
                        </group>
                        <group string='VAT Information'>
                            <field name="vat_system"/>
                            <field name="vat_amount_1"/>
                            <field name="vat_amount_2"/>
                            <field name="vat_amount_3"/>
                            <field name="vat_amount_4"/>
                        </group>
                    </group>
                    <group>
                        <field name="import_config_id" attrs="{'invisible': [('import_config_id','=',False)]}"/>
                        <field name='audit_label' readonly='1'/>
                        <field name='audit_06_rate'/>
                        <field name="type" invisible="1"/>
                        <field name="reason_for_blocking" attrs="{'invisible': [('state','!=','blocked')]}" style="background-color: red;color: White;font-weight: bold;"/>
                        <!-- <field name="record_created"/> -->
                        <field name="sale_invoice_id" attrs="{'invisible': [('sale_invoice_id','=',False)]}"/>
                        <field name="cn_invoice_id" attrs="{'invisible': [('cn_invoice_id','=',False)]}"/>
                        <field name="purchase_invoice_id" attrs="{'invisible': [('purchase_invoice_id','=',False)]}"/>
                        <field name="refund_invoice_id" attrs="{'invisible': [('refund_invoice_id','=',False)]}"/>
                        <field name="creation_error" attrs="{'invisible': [('creation_error','=',False)]}"/>
                    </group>
                    <notebook>
                        <page name='pinvoice' string='Pinvoice' attrs="{'invisible': [('type','!=','PUR')]}">
                            <group name="pinv">
                                <group>
                                    <field name="supplier_number"/>
                                    <field name="supplier_name"/>
                                    <field name="remarks_vendor_inv_no"/>
                                </group>
                                <group>
                                    <field name="ic_input"/>
                                    <field name="ic_output"/>
                                </group>
                            </group>
                            <group>
                                <group name="vat_amount" string="VAT Amount">
                                    <field name="vat_rate_1"/>
                                    <field name="vat_rate_2"/>
                                    <field name="vat_rate_3"/>
                                    <field name="vat_rate_4"/>
                                    <field name="vat_rate_total"/>
                                    <field name="vat_total"/>
                                    <field name="document_total"/>
                                    <field name="check_amount_by_sup_document"/>
                                </group>
                                <group name="discount" string="Discount">
                                    <field name="cash_discount_rate_percentage"/>
                                    <field name="cash_discount_vat_rate_1"/>
                                    <field name="cash_discount_vat_amount_1"/>
                                    <field name="cash_discount_vat_rate_2"/>
                                    <field name="cash_discount_vat_amount_2"/>
                                    <field name="cash_discount_vat_rate_3"/>
                                    <field name="cash_discount_vat_amount_3"/>
                                    <field name="cash_discount_vat_rate_4"/>
                                    <field name="cash_discount_vat_amount_4"/>
                                    <field name="total_cash_discount"/>
                                    <field name="total_cash_vat_discount"/>
                                    <field name="cash_discount_expiry_date"/>
                                    <field name="cashdiscount_rate"/>
                                    <field name="cashdiscount_expiration"/>
                                </group>
                            </group>
                        </page>
                        <page name='sinvoice' string='Sinvoice' attrs="{'invisible': [('type','!=','SLS')]}">
                            <group>
                                <group>
                                    <field name="customer_number"/>
                                    <field name="customer_name"/>
                                    <field name="purchase_invoice_no"/>
                                </group>
                                <group>
                                    <field name="customer_vat_id"/>
                                    <field name="customer_group"/>
                                    <field name="remark"/>
                                </group>
                            </group>
                            <group>
                                <group name="vat_amount" string="VAT Amount">
                                    <field name="inv_vat_rate_1"/>
                                    <field name="inv_vat_rate_2"/>
                                    <field name="inv_vat_rate_3"/>
                                    <field name="inv_vat_rate_4"/>
                                    <field name="total_vat_amount"/>
                                    <field name="document_total_ex_vat"/>
                                    <field name="document_total_inc_vat"/>
                                </group>
                                <group name="discount" string="Discount">
                                    <field name="cd_cash_discount_vat_rate_1"/>
                                    <field name="cd_vat_amount_on_discount_1"/>
                                    <field name="cd_cash_discount_vat_rate_2"/>
                                    <field name="cd_vat_amount_on_discount_2"/>
                                    <field name="cd_cash_discount_vat_rate_3"/>
                                    <field name="cd_vat_amount_on_discount_3"/>
                                    <field name="cd_cash_discount_vat_rate_4"/>
                                    <field name="cd_vat_amount_on_discount_4"/>
                                    <field name="cd_total_vat_amount"/>
                                    <field name="cd_document_total_ex_vat"/>
                                    <field name="cd_document_total_inc_vat"/>
                                    <field name="cd_cash_discount_expiry_date"/>
                                </group>
                            </group>
                        </page>
                        <page name='import_info' string='Other Details'>
                            <group>
                                <group>
                                    <field name="create_date"/>
                                    <field name="create_uid"/>
                                    <field name="write_date"/>
                                    <field name="write_uid"/>
                                </group>
                                <group>
                                    <field name="import_filename"/>
                                    <!-- <field name="record_created"/> -->
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <!-- <field name="activity_ids" widget="mail_activity"/> -->
                    <field name="message_ids" widget="mail_thread" options="{'post_refresh': 'recipients'}"/>
                </div>
            </form>
        </field>
    </record>

    <record id="view_ftp_data_tree" model="ir.ui.view">
        <field name="name">ftp.data.tree</field>
        <field name="model">ftp.data</field>
        <field name="arch" type="xml">
            <tree string="FTP Data">
                <field name="country" optional="show"/>
                <field name="book" optional="show"/>
                <field name="document_type" optional="show"/>
                <field name="document_number" optional="show"/>
                <field name="document_date" optional="hide"/>
                <field name="document_date_date" optional="hide"/>
                <field name="purchase_order_no" optional="hide"/>
                <field name="sales_order_no" optional="hide"/>
                <field name="purchase_invoice_no" optional="hide"/>
                <field name="supplier_number" optional="hide"/>
                <field name="supplier_name" optional="hide"/>
                <field name="customer_number" optional="hide"/>
                <field name="customer_name" optional="hide"/>
                <field name="import_config_id" optional="hide"/>
                <field name="vat_rate_total" optional="show" sum="Total"/>
                <field name="document_total" optional="show" sum="Total"/>
                <field name="document_total_ex_vat" optional="show" sum="Total"/>
                <field name="document_total_inc_vat" optional="show" sum="Total"/>
                <field name="state" optional="show"/>
            </tree>
        </field>
    </record>

    <record id="view_ftp_data_search" model="ir.ui.view">
        <field name="name">ftp.data.search</field>
        <field name="model">ftp.data</field>
        <field name="arch" type="xml">
            <search string="Search FTP Recrods">
                <field name="document_number" string="Document Number" filter_domain="[
                    '|', '|', '|', '|','|', '|','|', 
                    ('document_number', 'ilike', self), ('purchase_order_no', 'ilike', self), 
                    ('sales_order_no', 'ilike', self), ('purchase_invoice_no', 'ilike', self),
                    ('supplier_number', 'ilike', self), ('supplier_name', 'ilike', self),
                    ('customer_number', 'ilike', self), ('customer_name', 'ilike', self)]"/>
                <filter name="todo_blocked" string="TO DO and Blocked" domain="[('state','in',('todo','blocked'))]"/>
                <filter name="todo" string="TO DO" domain="[('state','=','todo')]"/>
                <filter name="done" string="Done" domain="[('state','=','done')]"/>
                <filter name="blocked" string="Blocked" domain="[('state','=','blocked')]"/>
                <filter name="cancelled" string="Cancelled" domain="[('state','=','cancel')]"/>
                <separator/>
                <filter name="BE" string="BE" domain="[('country','=','BE')]"/>
                <filter name="DE" string="DE" domain="[('country','=','DE')]"/>
                <filter name="NL" string="NL" domain="[('country','=','NL')]"/>
                <filter name="audit_region" string="Germany" domain="[('audit_region','=','Germany')]"/>
                <separator/>
                <filter name="invoice" string="Invoice" domain="[('document_type','=','invoice')]"/>
                <filter name="credit_note" string="Credit Note" domain="[('document_type','=','credit note')]"/>
                <separator/>
                <field name="document_number"/>
                <field name="purchase_order_no"/>
                <field name="sales_order_no"/>
                <field name="purchase_invoice_no"/>
                <field name="document_date"/>
                <field name="supplier_number"/>
                <field name="supplier_name"/>
                <field name="customer_number"/>
                <field name="customer_name"/>
                <field name="document_date_date"/>
                <field name="audit_region"/>
                <separator/>
                <group expand='0' string='Group by...'>
                    <filter string='Type' name='type' domain="[]" context="{'group_by': 'type'}"/>
                    <separator/>
                    <filter string='Status' name='state' domain="[]" context="{'group_by': 'state'}"/>
                    <separator/>
                    <filter string='Country' name='country' domain="[]" context="{'group_by': 'country'}"/>
                    <filter string='Region' name='audit_region' domain="[]" context="{'group_by': 'audit_region'}"/>
                    <filter string='Book' name='book' domain="[]" context="{'group_by': 'book'}"/>
                    <filter string='Document Type' name='document_type' domain="[]" context="{'group_by': 'document_type'}"/>
                    <separator/>
                    <filter string='Purchase Order No' name='purchase_order_no' domain="[]" context="{'group_by': 'purchase_order_no'}"/>
                    <filter string='Supplier No' name='supplier_number' domain="[]" context="{'group_by': 'supplier_number'}"/>
                    <filter string='Supplier Name' name='supplier_name' domain="[]" context="{'group_by': 'supplier_name'}"/>
                    <separator/>
                    <filter string='Sale Order No' name='sales_order_no' domain="[]" context="{'group_by': 'sales_order_no'}"/>
                    <filter string='Customer No' name='customer_number' domain="[]" context="{'group_by': 'customer_number'}"/>
                    <filter string='Customer Name' name='customer_name' domain="[]" context="{'group_by': 'customer_name'}"/>
                    <filter string='Document Date' name="document_date_date" domain="[]" context="{'group_by': 'document_date_date'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="action_ftp_data" model="ir.actions.act_window">
        <field name="name">FTP Data</field>
        <field name="res_model">ftp.data</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_ftp_data_tree"/>
        <field name="context">{'search_default_todo_blocked': 1}</field>
    </record>

        <menuitem 
            name="FTP Data"
            id="menu_ftp_data"
            parent="menu_imports_header"
            action="action_ftp_data"
            sequence="0"/>

        <record id="validate_ftp_data" model="ir.actions.server">
            <field name="name">Validate Entries</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.action_assign_config()</field>
        </record>

        <record id="cancel_ftp_data" model="ir.actions.server">
            <field name="name">Cancel Entries</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.action_cancel()</field>
        </record>

        <record id="cancel_ftp_data" model="ir.actions.server">
            <field name="name">Set TODO</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.action_todo()</field>
        </record>

        <record id="generate_entries_ftp_data" model="ir.actions.server">
            <field name="name">Generate INV/Bills</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.generate_inv_bills()</field>
        </record>
 
        <record id="update_audit_06_rate" model="ir.actions.server">
            <field name="name">Audit 06 Rate</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.server_action_compute_audit_06_rate()</field>
        </record>
 
        <record id="link_raw_data_invoice" model="ir.actions.server">
            <field name="name">Link Records</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.server_action_link_raw_data()</field>
        </record>
 
        <record id="link_file_ref" model="ir.actions.server">
            <field name="name">Update XLS reference</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.server_action_update_xls_ref()</field>
        </record>
 
        <record id="mark_dupilcate" model="ir.actions.server">
            <field name="name">Find Duplicates</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.mark_duplicate()</field>
        </record>
 
        <record id="reset_dupilcate" model="ir.actions.server">
            <field name="name">Reset Duplication</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.reset_duplicate()</field>
        </record>

        <record id="action_audit_lable_ftp_data" model="ir.actions.server">
            <field name="name">Audit Label</field>
            <field name="groups_id" eval="[(4, ref('account.group_account_invoice'))]"/>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_view_types">list</field>
            <field name="state">code</field>
            <field name="code">
                if records:
                    action = records.action_audit_label()
            </field>
        </record>
 
        <record id="action_cancel_blocked" model="ir.actions.server">
            <field name="name">Cancel State</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data"/>
            <field name="state">code</field>
            <field name="code">records.action_cancel_blocked()</field>
        </record>
<!--

        <record id="update_vendor_ref_ftp_data" model="ir.actions.server">
            <field name="name">Update Vendor Inv No</field>
            <field name="model_id" ref="sdt_account.model_ftp_data"/>
            <field name="binding_model_id" ref="sdt_account.model_ftp_data" />
            <field name="state">code</field>
            <field name="code">records.server_action_remarks_vendor_inv_no_update()</field>
        </record> -->
</odoo>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    